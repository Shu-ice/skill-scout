# FlashMathGame修正依頼プロンプト

## 緊急修正依頼

現在のFlashMathGame（`app/components/games/FlashMathGame.tsx`）に重大なバグがあります：

### 現在の問題
1. **「用意はいい？」のあと、いきなり答えを聞かれる** - 数字が表示されない
2. **ゲームフローが破綻している** - カウントダウン→数字表示→回答入力の流れが正しく動作しない
### 参考ファイル
`フラッシュ暗算.html`を参考に、以下の機能を完全に実装してください：

## 必須機能要件

### 1. ゲームフロー
- **カウントダウン**: 3→2→1→スタート！のアニメーション
- **数字表示**: 設定された速度で数字を順次表示
- **演算子表示**: + または - を数字と一緒に表示
- **回答入力**: 全ての数字表示後に入力フィールドを表示
- **結果表示**: 正解/不正解と正解値の表示

### 2. 設定機能
- **桁数設定**: 1桁〜3桁のスライダー
- **速度設定**: 0.5秒〜2.0秒のスライダー
- **問題数設定**: 5問〜20問のスライダー
- **モード選択**: 加算/減算/混合モード（計算結果が負の数にはならない）
- **音効果**: オン/オフ切り替え
- **視覚効果**: オン/オフ切り替え

### 3. 子供向けUI要件
- **カラフルで楽しいデザイン**: グラデーション、アニメーション
- **分かりやすいアイコン**: 絵文字やアイコンを多用
- **大きなボタン**: タッチしやすいサイズ
- **音効果**: 正解時の喜びの音、不正解時の励まし
- **視覚効果**: 正解時の紙吹雪、コンボ表示

### 4. 記録・統計機能
- **ゲーム記録**: 日時、設定、結果、時間を保存
- **統計表示**: 総ゲーム数、正解率
- **コンボシステム**: 連続正解の記録と表示

### 5. 技術要件
- **AsyncStorage**: 記録と設定の永続化
- **アニメーション**: React Native Animated API
- **ハプティックフィードバック**: expo-haptics
- **レスポンシブデザイン**: 様々な画面サイズに対応

## 実装指示

### 段階的実装
1. **基本ゲームフロー修正** - カウントダウン→数字表示→回答入力の流れを正しく実装
2. **UI/UX改善** - 子供向けのカラフルで楽しいデザインに変更
3. **設定機能追加** - スライダーとモード選択を実装
4. **記録・統計機能** - AsyncStorageを使ったデータ永続化
5. **音・視覚効果** - 正解時の紙吹雪、音効果を実装

### 品質要件
- **バグチェック**: 全ての機能を動作確認
- **エラーハンドリング**: 適切なエラー処理
- **パフォーマンス**: スムーズなアニメーション
- **アクセシビリティ**: 子供でも使いやすいUI

### デザインガイドライン
- **カラーパレット**: 明るく楽しい色（青、緑、オレンジ、ピンク）
- **フォント**: 読みやすい大きなフォント
- **アイコン**: 絵文字や分かりやすいアイコン
- **アニメーション**: 滑らかで楽しい動き

## 最終確認事項
- [ ] カウントダウンが正しく動作する
- [ ] 数字が順次表示される
- [ ] 演算子（+/-）が正しく表示される
- [ ] 回答入力が適切なタイミングで表示される
- [ ] 正解/不正解の判定が正しく動作する
- [ ] 子供向けの楽しいデザインになっている
- [ ] 設定機能が全て動作する
- [ ] 記録・統計が正しく保存・表示される
- [ ] 音・視覚効果が動作する
- [ ] エラーが発生しない

## 緊急度
**最高優先度** - 現在のゲームが全く機能していないため、即座に修正が必要です。

参考ファイルの`フラッシュ暗算.html`の機能と雰囲気を完全に再現し、子供向けの楽しいフラッシュ暗算ゲームを作成してください。 